
# Описание проекта

## Требования
- Python 3.10
- Django 5
- Django Rest Framework
- PostgreSQL

## Развертывание

1. Клонируйте проект с GitHub в вашу IDE, например, PyCharm.

2. Создайте виртуальное окружение и активируйте его:
```bash
python -m venv venv
source venv/bin/activate  # Для Windows используйте venv\Scriptsctivate
```

3. Установите зависимости:
```bash
pip install -r requirements.txt
```

4. Создайте базу данных PostgreSQL и настройте подключение в файле `local_settings.py`, который должен быть создан в корне проекта. Для этого скопируйте пример из `example_local_settings.py` в новый файл `local_settings.py` и укажите правильные параметры для подключения к вашей базе данных.

5. Примените миграции:
```bash
python manage.py migrate
```

7. Для создания тестовых данных в базе данных выполните команду. Эта команда создаст суперпользователя Django и типы пользователей, гендеров и документов.
```bash
python manage.py speed_data
```

## Тестовые данные

Проект содержит несколько тестовых JSON файлов, которые могут быть полезны для проверки.

## API

Приложение может обрабатывать следующие запросы:

- **POST**, **GET**, **DELETE** запросы на создание и изменение пользователей и их документов.
- Получение информации о пользователе (для текущего пользователя) и его документах с фильтром по документам.
- Получение информации о всех пользователях (только если вы администратор).

### Запуск приложения

После запуска локального сервера на порту 8000, доступно API по адресу:
```
http://localhost:8000/api/
```

### Методы

#### Получение списка пользователей

`GET /api/users/`

Параметры фильтрации: 
- `users`: список логинов пользователей, разделенных запятой.

#### Получение информации о текущем пользователе и его документах

`GET /api/profile/`

Параметры фильтрации:
- `doc_ids`: список ID документов, разделенных запятой.

### Авторизация

Авторизация осуществляется по токену. Для получения токена нужно отправить POST запрос на:
```
POST /api/authtoken/
```
Тело запроса должно содержать:
```json
{
  "login": "<ваш_логин>",
  "password": "<ваш_пароль>"
}
```
В ответ будет возвращен токен, который необходимо указать в заголовке "Authorization" для аутентификации при отправке каждого запроса.

Пример заголовка для авторизации:
```
Authorization: Token <token>
```

## Пример JSON для POST/DELETE запросов

```json
{
  "login": "myuser",
  "password": "mypassword",
  "email": "myuser@example.com",
  "first_name": "Имя",
  "last_name": "Фамилия"
}
```
